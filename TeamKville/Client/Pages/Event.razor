@page "/event/{id:int}"
@using TeamKville.Shared;

<div class="container d-flex w-100">
	<div class="container mt-5 border border-2 d-flex justify-content-center w-75">
			
		<img src="@SharedClass.GetImage("event", currentEvent.Name)" style="height: 400px; width: auto; object-fit: contain;" />
	</div>
	<div class="card mt-5 mx-3 w-25 h-75 border border-0 rounded-0" style="background-color:#c2d1d9; ">
			<div class="card-body" style="height: 404px; ">
				<h5 class="text-center">Detaljer</h5>
				<div class="card-text h-50 mt-5">					

					<p class="p-0 m-0"><b>Deltagare:</b></p> <!--Lägg till sen när vi löst det i API-->
						
										
				</div>

				@if(currentEvent.Date > DateTime.Now)
				{
					<div class="text-center">
						<button class="btn btn-primary">Registrera</button>
					</div>
				}
			
			</div>
	</div>
</div>

<div class="container mt-3 mb-3 p-3">
	<h2>@currentEvent.Name</h2>
	<p>	@SharedClass.loremIpsum;</p>
	<h3>Datum: @currentEvent.Date</h3>
</div>
@code {
	[Parameter]
	public int Id { get; set; }

	EventDto currentEvent = new EventDto();

	protected override async Task OnInitializedAsync()
	{
		var allEvents = await HttpClient.GetFromJsonAsync<IEnumerable<EventDto>>(HttpClient.BaseAddress + "event/all");
		currentEvent = allEvents.Where(e => e.Id == Id).First();
	}
}
