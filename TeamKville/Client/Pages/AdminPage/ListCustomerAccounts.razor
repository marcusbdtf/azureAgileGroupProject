@page "/listcustomeraccounts"

<h1 class="text-center p-2 pt-4">List of Customer Accounts</h1>

<div class="container p-2 pt-4">
	<div class="accordion" id="UsersAccordion">
		
		@if (AllUsers != null)
		{
			@for (int i = 0; i < AllUsers.Length; i++)
			{
				<div class="accordion-item">
					<h2 class="accordion-header" id="heading_@i">
						<button class="accordion-button collapsed" type="button" 
						        data-bs-toggle="collapse" data-bs-target="#collapse_@i" 
						        aria-expanded="True" aria-controls="collapse_@i">
							@AllUsers[i].Email
						</button>
					</h2>
					<div id="collapse_@i" class="accordion-collapse collapse" aria-labelledby="#heading_@i" data-bs-parent="#UsersAccordion">
						<div class="accordion-body">
							<ul>
								<li>
									UserId: @AllUsers[i].UserId
								</li>
								<li>
									Email: @AllUsers[i].Email
								</li>
								<li>
									Name: @AllUsers[i].FirstName @AllUsers[i].LastName
								</li>
								<li>
									Phone: @AllUsers[i].PhoneNumber
								</li>
								<li>
									Address: @AllUsers[i].Address.Street
								</li>
								<li>
									City: @AllUsers[i].Address.City
								</li>
								<li>
									PostalCode: @AllUsers[i].Address.PostNumber
								</li>
							</ul>
						</div>
					</div>
				</div>
			}
		}

	</div>
</div>

@code {
	public UserDto[]? AllUsers;

	protected override async Task OnInitializedAsync()
	{
		AllUsers = await HttpClient.GetFromJsonAsync<UserDto[]>(HttpClient.BaseAddress + "api/user");

		await base.OnInitializedAsync();
	}

}